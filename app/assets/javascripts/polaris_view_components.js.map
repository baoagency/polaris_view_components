{"version":3,"file":"polaris_view_components.js","sources":["../../../node_modules/@stimulus/core/dist/event_listener.js","../../../node_modules/@stimulus/core/dist/dispatcher.js","../../../node_modules/@stimulus/core/dist/action_descriptor.js","../../../node_modules/@stimulus/core/dist/action.js","../../../node_modules/@stimulus/core/dist/binding.js","../../../node_modules/@stimulus/mutation-observers/dist/element_observer.js","../../../node_modules/@stimulus/mutation-observers/dist/attribute_observer.js","../../../node_modules/@stimulus/mutation-observers/dist/string_map_observer.js","../../../node_modules/@stimulus/multimap/dist/set_operations.js","../../../node_modules/@stimulus/multimap/dist/multimap.js","../../../node_modules/@stimulus/multimap/dist/indexed_multimap.js","../../../node_modules/@stimulus/mutation-observers/dist/token_list_observer.js","../../../node_modules/@stimulus/mutation-observers/dist/value_list_observer.js","../../../node_modules/@stimulus/core/dist/binding_observer.js","../../../node_modules/@stimulus/core/dist/value_observer.js","../../../node_modules/@stimulus/core/dist/context.js","../../../node_modules/@stimulus/core/dist/inheritable_statics.js","../../../node_modules/@stimulus/core/dist/blessing.js","../../../node_modules/@stimulus/core/dist/module.js","../../../node_modules/@stimulus/core/dist/definition.js","../../../node_modules/@stimulus/core/dist/class_map.js","../../../node_modules/@stimulus/core/dist/string_helpers.js","../../../node_modules/@stimulus/core/dist/data_map.js","../../../node_modules/@stimulus/core/dist/guide.js","../../../node_modules/@stimulus/core/dist/selectors.js","../../../node_modules/@stimulus/core/dist/target_set.js","../../../node_modules/@stimulus/core/dist/scope.js","../../../node_modules/@stimulus/core/dist/scope_observer.js","../../../node_modules/@stimulus/core/dist/router.js","../../../node_modules/@stimulus/core/dist/schema.js","../../../node_modules/@stimulus/core/dist/application.js","../../../node_modules/@stimulus/core/dist/class_properties.js","../../../node_modules/@stimulus/core/dist/target_properties.js","../../../node_modules/@stimulus/core/dist/value_properties.js","../../../node_modules/@stimulus/core/dist/controller.js","../../components/polaris/text_field.js","../../components/polaris/polaris.js"],"sourcesContent":["var EventListener = /** @class */ (function () {\n    function EventListener(eventTarget, eventName, eventOptions) {\n        this.eventTarget = eventTarget;\n        this.eventName = eventName;\n        this.eventOptions = eventOptions;\n        this.unorderedBindings = new Set();\n    }\n    EventListener.prototype.connect = function () {\n        this.eventTarget.addEventListener(this.eventName, this, this.eventOptions);\n    };\n    EventListener.prototype.disconnect = function () {\n        this.eventTarget.removeEventListener(this.eventName, this, this.eventOptions);\n    };\n    // Binding observer delegate\n    /** @hidden */\n    EventListener.prototype.bindingConnected = function (binding) {\n        this.unorderedBindings.add(binding);\n    };\n    /** @hidden */\n    EventListener.prototype.bindingDisconnected = function (binding) {\n        this.unorderedBindings.delete(binding);\n    };\n    EventListener.prototype.handleEvent = function (event) {\n        var extendedEvent = extendEvent(event);\n        for (var _i = 0, _a = this.bindings; _i < _a.length; _i++) {\n            var binding = _a[_i];\n            if (extendedEvent.immediatePropagationStopped) {\n                break;\n            }\n            else {\n                binding.handleEvent(extendedEvent);\n            }\n        }\n    };\n    Object.defineProperty(EventListener.prototype, \"bindings\", {\n        get: function () {\n            return Array.from(this.unorderedBindings).sort(function (left, right) {\n                var leftIndex = left.index, rightIndex = right.index;\n                return leftIndex < rightIndex ? -1 : leftIndex > rightIndex ? 1 : 0;\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return EventListener;\n}());\nexport { EventListener };\nfunction extendEvent(event) {\n    if (\"immediatePropagationStopped\" in event) {\n        return event;\n    }\n    else {\n        var stopImmediatePropagation_1 = event.stopImmediatePropagation;\n        return Object.assign(event, {\n            immediatePropagationStopped: false,\n            stopImmediatePropagation: function () {\n                this.immediatePropagationStopped = true;\n                stopImmediatePropagation_1.call(this);\n            }\n        });\n    }\n}\n//# sourceMappingURL=event_listener.js.map","import { EventListener } from \"./event_listener\";\nvar Dispatcher = /** @class */ (function () {\n    function Dispatcher(application) {\n        this.application = application;\n        this.eventListenerMaps = new Map;\n        this.started = false;\n    }\n    Dispatcher.prototype.start = function () {\n        if (!this.started) {\n            this.started = true;\n            this.eventListeners.forEach(function (eventListener) { return eventListener.connect(); });\n        }\n    };\n    Dispatcher.prototype.stop = function () {\n        if (this.started) {\n            this.started = false;\n            this.eventListeners.forEach(function (eventListener) { return eventListener.disconnect(); });\n        }\n    };\n    Object.defineProperty(Dispatcher.prototype, \"eventListeners\", {\n        get: function () {\n            return Array.from(this.eventListenerMaps.values())\n                .reduce(function (listeners, map) { return listeners.concat(Array.from(map.values())); }, []);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // Binding observer delegate\n    /** @hidden */\n    Dispatcher.prototype.bindingConnected = function (binding) {\n        this.fetchEventListenerForBinding(binding).bindingConnected(binding);\n    };\n    /** @hidden */\n    Dispatcher.prototype.bindingDisconnected = function (binding) {\n        this.fetchEventListenerForBinding(binding).bindingDisconnected(binding);\n    };\n    // Error handling\n    Dispatcher.prototype.handleError = function (error, message, detail) {\n        if (detail === void 0) { detail = {}; }\n        this.application.handleError(error, \"Error \" + message, detail);\n    };\n    Dispatcher.prototype.fetchEventListenerForBinding = function (binding) {\n        var eventTarget = binding.eventTarget, eventName = binding.eventName, eventOptions = binding.eventOptions;\n        return this.fetchEventListener(eventTarget, eventName, eventOptions);\n    };\n    Dispatcher.prototype.fetchEventListener = function (eventTarget, eventName, eventOptions) {\n        var eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);\n        var cacheKey = this.cacheKey(eventName, eventOptions);\n        var eventListener = eventListenerMap.get(cacheKey);\n        if (!eventListener) {\n            eventListener = this.createEventListener(eventTarget, eventName, eventOptions);\n            eventListenerMap.set(cacheKey, eventListener);\n        }\n        return eventListener;\n    };\n    Dispatcher.prototype.createEventListener = function (eventTarget, eventName, eventOptions) {\n        var eventListener = new EventListener(eventTarget, eventName, eventOptions);\n        if (this.started) {\n            eventListener.connect();\n        }\n        return eventListener;\n    };\n    Dispatcher.prototype.fetchEventListenerMapForEventTarget = function (eventTarget) {\n        var eventListenerMap = this.eventListenerMaps.get(eventTarget);\n        if (!eventListenerMap) {\n            eventListenerMap = new Map;\n            this.eventListenerMaps.set(eventTarget, eventListenerMap);\n        }\n        return eventListenerMap;\n    };\n    Dispatcher.prototype.cacheKey = function (eventName, eventOptions) {\n        var parts = [eventName];\n        Object.keys(eventOptions).sort().forEach(function (key) {\n            parts.push(\"\" + (eventOptions[key] ? \"\" : \"!\") + key);\n        });\n        return parts.join(\":\");\n    };\n    return Dispatcher;\n}());\nexport { Dispatcher };\n//# sourceMappingURL=dispatcher.js.map","// capture nos.:            12   23 4               43   1 5   56 7      768 9  98\nvar descriptorPattern = /^((.+?)(@(window|document))?->)?(.+?)(#([^:]+?))(:(.+))?$/;\nexport function parseActionDescriptorString(descriptorString) {\n    var source = descriptorString.trim();\n    var matches = source.match(descriptorPattern) || [];\n    return {\n        eventTarget: parseEventTarget(matches[4]),\n        eventName: matches[2],\n        eventOptions: matches[9] ? parseEventOptions(matches[9]) : {},\n        identifier: matches[5],\n        methodName: matches[7]\n    };\n}\nfunction parseEventTarget(eventTargetName) {\n    if (eventTargetName == \"window\") {\n        return window;\n    }\n    else if (eventTargetName == \"document\") {\n        return document;\n    }\n}\nfunction parseEventOptions(eventOptions) {\n    return eventOptions.split(\":\").reduce(function (options, token) {\n        var _a;\n        return Object.assign(options, (_a = {}, _a[token.replace(/^!/, \"\")] = !/^!/.test(token), _a));\n    }, {});\n}\nexport function stringifyEventTarget(eventTarget) {\n    if (eventTarget == window) {\n        return \"window\";\n    }\n    else if (eventTarget == document) {\n        return \"document\";\n    }\n}\n//# sourceMappingURL=action_descriptor.js.map","import { parseActionDescriptorString, stringifyEventTarget } from \"./action_descriptor\";\nvar Action = /** @class */ (function () {\n    function Action(element, index, descriptor) {\n        this.element = element;\n        this.index = index;\n        this.eventTarget = descriptor.eventTarget || element;\n        this.eventName = descriptor.eventName || getDefaultEventNameForElement(element) || error(\"missing event name\");\n        this.eventOptions = descriptor.eventOptions || {};\n        this.identifier = descriptor.identifier || error(\"missing identifier\");\n        this.methodName = descriptor.methodName || error(\"missing method name\");\n    }\n    Action.forToken = function (token) {\n        return new this(token.element, token.index, parseActionDescriptorString(token.content));\n    };\n    Action.prototype.toString = function () {\n        var eventNameSuffix = this.eventTargetName ? \"@\" + this.eventTargetName : \"\";\n        return \"\" + this.eventName + eventNameSuffix + \"->\" + this.identifier + \"#\" + this.methodName;\n    };\n    Object.defineProperty(Action.prototype, \"eventTargetName\", {\n        get: function () {\n            return stringifyEventTarget(this.eventTarget);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Action;\n}());\nexport { Action };\nvar defaultEventNames = {\n    \"a\": function (e) { return \"click\"; },\n    \"button\": function (e) { return \"click\"; },\n    \"form\": function (e) { return \"submit\"; },\n    \"input\": function (e) { return e.getAttribute(\"type\") == \"submit\" ? \"click\" : \"input\"; },\n    \"select\": function (e) { return \"change\"; },\n    \"textarea\": function (e) { return \"input\"; }\n};\nexport function getDefaultEventNameForElement(element) {\n    var tagName = element.tagName.toLowerCase();\n    if (tagName in defaultEventNames) {\n        return defaultEventNames[tagName](element);\n    }\n}\nfunction error(message) {\n    throw new Error(message);\n}\n//# sourceMappingURL=action.js.map","var Binding = /** @class */ (function () {\n    function Binding(context, action) {\n        this.context = context;\n        this.action = action;\n    }\n    Object.defineProperty(Binding.prototype, \"index\", {\n        get: function () {\n            return this.action.index;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"eventTarget\", {\n        get: function () {\n            return this.action.eventTarget;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"eventOptions\", {\n        get: function () {\n            return this.action.eventOptions;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"identifier\", {\n        get: function () {\n            return this.context.identifier;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Binding.prototype.handleEvent = function (event) {\n        if (this.willBeInvokedByEvent(event)) {\n            this.invokeWithEvent(event);\n        }\n    };\n    Object.defineProperty(Binding.prototype, \"eventName\", {\n        get: function () {\n            return this.action.eventName;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"method\", {\n        get: function () {\n            var method = this.controller[this.methodName];\n            if (typeof method == \"function\") {\n                return method;\n            }\n            throw new Error(\"Action \\\"\" + this.action + \"\\\" references undefined method \\\"\" + this.methodName + \"\\\"\");\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Binding.prototype.invokeWithEvent = function (event) {\n        try {\n            this.method.call(this.controller, event);\n        }\n        catch (error) {\n            var _a = this, identifier = _a.identifier, controller = _a.controller, element = _a.element, index = _a.index;\n            var detail = { identifier: identifier, controller: controller, element: element, index: index, event: event };\n            this.context.handleError(error, \"invoking action \\\"\" + this.action + \"\\\"\", detail);\n        }\n    };\n    Binding.prototype.willBeInvokedByEvent = function (event) {\n        var eventTarget = event.target;\n        if (this.element === eventTarget) {\n            return true;\n        }\n        else if (eventTarget instanceof Element && this.element.contains(eventTarget)) {\n            return this.scope.containsElement(eventTarget);\n        }\n        else {\n            return this.scope.containsElement(this.action.element);\n        }\n    };\n    Object.defineProperty(Binding.prototype, \"controller\", {\n        get: function () {\n            return this.context.controller;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"methodName\", {\n        get: function () {\n            return this.action.methodName;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Binding.prototype, \"scope\", {\n        get: function () {\n            return this.context.scope;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Binding;\n}());\nexport { Binding };\n//# sourceMappingURL=binding.js.map","var ElementObserver = /** @class */ (function () {\n    function ElementObserver(element, delegate) {\n        var _this = this;\n        this.element = element;\n        this.started = false;\n        this.delegate = delegate;\n        this.elements = new Set;\n        this.mutationObserver = new MutationObserver(function (mutations) { return _this.processMutations(mutations); });\n    }\n    ElementObserver.prototype.start = function () {\n        if (!this.started) {\n            this.started = true;\n            this.mutationObserver.observe(this.element, { attributes: true, childList: true, subtree: true });\n            this.refresh();\n        }\n    };\n    ElementObserver.prototype.stop = function () {\n        if (this.started) {\n            this.mutationObserver.takeRecords();\n            this.mutationObserver.disconnect();\n            this.started = false;\n        }\n    };\n    ElementObserver.prototype.refresh = function () {\n        if (this.started) {\n            var matches = new Set(this.matchElementsInTree());\n            for (var _i = 0, _a = Array.from(this.elements); _i < _a.length; _i++) {\n                var element = _a[_i];\n                if (!matches.has(element)) {\n                    this.removeElement(element);\n                }\n            }\n            for (var _b = 0, _c = Array.from(matches); _b < _c.length; _b++) {\n                var element = _c[_b];\n                this.addElement(element);\n            }\n        }\n    };\n    // Mutation record processing\n    ElementObserver.prototype.processMutations = function (mutations) {\n        if (this.started) {\n            for (var _i = 0, mutations_1 = mutations; _i < mutations_1.length; _i++) {\n                var mutation = mutations_1[_i];\n                this.processMutation(mutation);\n            }\n        }\n    };\n    ElementObserver.prototype.processMutation = function (mutation) {\n        if (mutation.type == \"attributes\") {\n            this.processAttributeChange(mutation.target, mutation.attributeName);\n        }\n        else if (mutation.type == \"childList\") {\n            this.processRemovedNodes(mutation.removedNodes);\n            this.processAddedNodes(mutation.addedNodes);\n        }\n    };\n    ElementObserver.prototype.processAttributeChange = function (node, attributeName) {\n        var element = node;\n        if (this.elements.has(element)) {\n            if (this.delegate.elementAttributeChanged && this.matchElement(element)) {\n                this.delegate.elementAttributeChanged(element, attributeName);\n            }\n            else {\n                this.removeElement(element);\n            }\n        }\n        else if (this.matchElement(element)) {\n            this.addElement(element);\n        }\n    };\n    ElementObserver.prototype.processRemovedNodes = function (nodes) {\n        for (var _i = 0, _a = Array.from(nodes); _i < _a.length; _i++) {\n            var node = _a[_i];\n            var element = this.elementFromNode(node);\n            if (element) {\n                this.processTree(element, this.removeElement);\n            }\n        }\n    };\n    ElementObserver.prototype.processAddedNodes = function (nodes) {\n        for (var _i = 0, _a = Array.from(nodes); _i < _a.length; _i++) {\n            var node = _a[_i];\n            var element = this.elementFromNode(node);\n            if (element && this.elementIsActive(element)) {\n                this.processTree(element, this.addElement);\n            }\n        }\n    };\n    // Element matching\n    ElementObserver.prototype.matchElement = function (element) {\n        return this.delegate.matchElement(element);\n    };\n    ElementObserver.prototype.matchElementsInTree = function (tree) {\n        if (tree === void 0) { tree = this.element; }\n        return this.delegate.matchElementsInTree(tree);\n    };\n    ElementObserver.prototype.processTree = function (tree, processor) {\n        for (var _i = 0, _a = this.matchElementsInTree(tree); _i < _a.length; _i++) {\n            var element = _a[_i];\n            processor.call(this, element);\n        }\n    };\n    ElementObserver.prototype.elementFromNode = function (node) {\n        if (node.nodeType == Node.ELEMENT_NODE) {\n            return node;\n        }\n    };\n    ElementObserver.prototype.elementIsActive = function (element) {\n        if (element.isConnected != this.element.isConnected) {\n            return false;\n        }\n        else {\n            return this.element.contains(element);\n        }\n    };\n    // Element tracking\n    ElementObserver.prototype.addElement = function (element) {\n        if (!this.elements.has(element)) {\n            if (this.elementIsActive(element)) {\n                this.elements.add(element);\n                if (this.delegate.elementMatched) {\n                    this.delegate.elementMatched(element);\n                }\n            }\n        }\n    };\n    ElementObserver.prototype.removeElement = function (element) {\n        if (this.elements.has(element)) {\n            this.elements.delete(element);\n            if (this.delegate.elementUnmatched) {\n                this.delegate.elementUnmatched(element);\n            }\n        }\n    };\n    return ElementObserver;\n}());\nexport { ElementObserver };\n//# sourceMappingURL=element_observer.js.map","import { ElementObserver } from \"./element_observer\";\nvar AttributeObserver = /** @class */ (function () {\n    function AttributeObserver(element, attributeName, delegate) {\n        this.attributeName = attributeName;\n        this.delegate = delegate;\n        this.elementObserver = new ElementObserver(element, this);\n    }\n    Object.defineProperty(AttributeObserver.prototype, \"element\", {\n        get: function () {\n            return this.elementObserver.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(AttributeObserver.prototype, \"selector\", {\n        get: function () {\n            return \"[\" + this.attributeName + \"]\";\n        },\n        enumerable: false,\n        configurable: true\n    });\n    AttributeObserver.prototype.start = function () {\n        this.elementObserver.start();\n    };\n    AttributeObserver.prototype.stop = function () {\n        this.elementObserver.stop();\n    };\n    AttributeObserver.prototype.refresh = function () {\n        this.elementObserver.refresh();\n    };\n    Object.defineProperty(AttributeObserver.prototype, \"started\", {\n        get: function () {\n            return this.elementObserver.started;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // Element observer delegate\n    AttributeObserver.prototype.matchElement = function (element) {\n        return element.hasAttribute(this.attributeName);\n    };\n    AttributeObserver.prototype.matchElementsInTree = function (tree) {\n        var match = this.matchElement(tree) ? [tree] : [];\n        var matches = Array.from(tree.querySelectorAll(this.selector));\n        return match.concat(matches);\n    };\n    AttributeObserver.prototype.elementMatched = function (element) {\n        if (this.delegate.elementMatchedAttribute) {\n            this.delegate.elementMatchedAttribute(element, this.attributeName);\n        }\n    };\n    AttributeObserver.prototype.elementUnmatched = function (element) {\n        if (this.delegate.elementUnmatchedAttribute) {\n            this.delegate.elementUnmatchedAttribute(element, this.attributeName);\n        }\n    };\n    AttributeObserver.prototype.elementAttributeChanged = function (element, attributeName) {\n        if (this.delegate.elementAttributeValueChanged && this.attributeName == attributeName) {\n            this.delegate.elementAttributeValueChanged(element, attributeName);\n        }\n    };\n    return AttributeObserver;\n}());\nexport { AttributeObserver };\n//# sourceMappingURL=attribute_observer.js.map","var StringMapObserver = /** @class */ (function () {\n    function StringMapObserver(element, delegate) {\n        var _this = this;\n        this.element = element;\n        this.delegate = delegate;\n        this.started = false;\n        this.stringMap = new Map;\n        this.mutationObserver = new MutationObserver(function (mutations) { return _this.processMutations(mutations); });\n    }\n    StringMapObserver.prototype.start = function () {\n        if (!this.started) {\n            this.started = true;\n            this.mutationObserver.observe(this.element, { attributes: true });\n            this.refresh();\n        }\n    };\n    StringMapObserver.prototype.stop = function () {\n        if (this.started) {\n            this.mutationObserver.takeRecords();\n            this.mutationObserver.disconnect();\n            this.started = false;\n        }\n    };\n    StringMapObserver.prototype.refresh = function () {\n        if (this.started) {\n            for (var _i = 0, _a = this.knownAttributeNames; _i < _a.length; _i++) {\n                var attributeName = _a[_i];\n                this.refreshAttribute(attributeName);\n            }\n        }\n    };\n    // Mutation record processing\n    StringMapObserver.prototype.processMutations = function (mutations) {\n        if (this.started) {\n            for (var _i = 0, mutations_1 = mutations; _i < mutations_1.length; _i++) {\n                var mutation = mutations_1[_i];\n                this.processMutation(mutation);\n            }\n        }\n    };\n    StringMapObserver.prototype.processMutation = function (mutation) {\n        var attributeName = mutation.attributeName;\n        if (attributeName) {\n            this.refreshAttribute(attributeName);\n        }\n    };\n    // State tracking\n    StringMapObserver.prototype.refreshAttribute = function (attributeName) {\n        var key = this.delegate.getStringMapKeyForAttribute(attributeName);\n        if (key != null) {\n            if (!this.stringMap.has(attributeName)) {\n                this.stringMapKeyAdded(key, attributeName);\n            }\n            var value = this.element.getAttribute(attributeName);\n            if (this.stringMap.get(attributeName) != value) {\n                this.stringMapValueChanged(value, key);\n            }\n            if (value == null) {\n                this.stringMap.delete(attributeName);\n                this.stringMapKeyRemoved(key, attributeName);\n            }\n            else {\n                this.stringMap.set(attributeName, value);\n            }\n        }\n    };\n    StringMapObserver.prototype.stringMapKeyAdded = function (key, attributeName) {\n        if (this.delegate.stringMapKeyAdded) {\n            this.delegate.stringMapKeyAdded(key, attributeName);\n        }\n    };\n    StringMapObserver.prototype.stringMapValueChanged = function (value, key) {\n        if (this.delegate.stringMapValueChanged) {\n            this.delegate.stringMapValueChanged(value, key);\n        }\n    };\n    StringMapObserver.prototype.stringMapKeyRemoved = function (key, attributeName) {\n        if (this.delegate.stringMapKeyRemoved) {\n            this.delegate.stringMapKeyRemoved(key, attributeName);\n        }\n    };\n    Object.defineProperty(StringMapObserver.prototype, \"knownAttributeNames\", {\n        get: function () {\n            return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(StringMapObserver.prototype, \"currentAttributeNames\", {\n        get: function () {\n            return Array.from(this.element.attributes).map(function (attribute) { return attribute.name; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(StringMapObserver.prototype, \"recordedAttributeNames\", {\n        get: function () {\n            return Array.from(this.stringMap.keys());\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return StringMapObserver;\n}());\nexport { StringMapObserver };\n//# sourceMappingURL=string_map_observer.js.map","export function add(map, key, value) {\n    fetch(map, key).add(value);\n}\nexport function del(map, key, value) {\n    fetch(map, key).delete(value);\n    prune(map, key);\n}\nexport function fetch(map, key) {\n    var values = map.get(key);\n    if (!values) {\n        values = new Set();\n        map.set(key, values);\n    }\n    return values;\n}\nexport function prune(map, key) {\n    var values = map.get(key);\n    if (values != null && values.size == 0) {\n        map.delete(key);\n    }\n}\n//# sourceMappingURL=set_operations.js.map","import { add, del } from \"./set_operations\";\nvar Multimap = /** @class */ (function () {\n    function Multimap() {\n        this.valuesByKey = new Map();\n    }\n    Object.defineProperty(Multimap.prototype, \"values\", {\n        get: function () {\n            var sets = Array.from(this.valuesByKey.values());\n            return sets.reduce(function (values, set) { return values.concat(Array.from(set)); }, []);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Multimap.prototype, \"size\", {\n        get: function () {\n            var sets = Array.from(this.valuesByKey.values());\n            return sets.reduce(function (size, set) { return size + set.size; }, 0);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Multimap.prototype.add = function (key, value) {\n        add(this.valuesByKey, key, value);\n    };\n    Multimap.prototype.delete = function (key, value) {\n        del(this.valuesByKey, key, value);\n    };\n    Multimap.prototype.has = function (key, value) {\n        var values = this.valuesByKey.get(key);\n        return values != null && values.has(value);\n    };\n    Multimap.prototype.hasKey = function (key) {\n        return this.valuesByKey.has(key);\n    };\n    Multimap.prototype.hasValue = function (value) {\n        var sets = Array.from(this.valuesByKey.values());\n        return sets.some(function (set) { return set.has(value); });\n    };\n    Multimap.prototype.getValuesForKey = function (key) {\n        var values = this.valuesByKey.get(key);\n        return values ? Array.from(values) : [];\n    };\n    Multimap.prototype.getKeysForValue = function (value) {\n        return Array.from(this.valuesByKey)\n            .filter(function (_a) {\n            var key = _a[0], values = _a[1];\n            return values.has(value);\n        })\n            .map(function (_a) {\n            var key = _a[0], values = _a[1];\n            return key;\n        });\n    };\n    return Multimap;\n}());\nexport { Multimap };\n//# sourceMappingURL=multimap.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Multimap } from \"./multimap\";\nimport { add, del } from \"./set_operations\";\nvar IndexedMultimap = /** @class */ (function (_super) {\n    __extends(IndexedMultimap, _super);\n    function IndexedMultimap() {\n        var _this = _super.call(this) || this;\n        _this.keysByValue = new Map;\n        return _this;\n    }\n    Object.defineProperty(IndexedMultimap.prototype, \"values\", {\n        get: function () {\n            return Array.from(this.keysByValue.keys());\n        },\n        enumerable: false,\n        configurable: true\n    });\n    IndexedMultimap.prototype.add = function (key, value) {\n        _super.prototype.add.call(this, key, value);\n        add(this.keysByValue, value, key);\n    };\n    IndexedMultimap.prototype.delete = function (key, value) {\n        _super.prototype.delete.call(this, key, value);\n        del(this.keysByValue, value, key);\n    };\n    IndexedMultimap.prototype.hasValue = function (value) {\n        return this.keysByValue.has(value);\n    };\n    IndexedMultimap.prototype.getKeysForValue = function (value) {\n        var set = this.keysByValue.get(value);\n        return set ? Array.from(set) : [];\n    };\n    return IndexedMultimap;\n}(Multimap));\nexport { IndexedMultimap };\n//# sourceMappingURL=indexed_multimap.js.map","import { AttributeObserver } from \"./attribute_observer\";\nimport { Multimap } from \"@stimulus/multimap\";\nvar TokenListObserver = /** @class */ (function () {\n    function TokenListObserver(element, attributeName, delegate) {\n        this.attributeObserver = new AttributeObserver(element, attributeName, this);\n        this.delegate = delegate;\n        this.tokensByElement = new Multimap;\n    }\n    Object.defineProperty(TokenListObserver.prototype, \"started\", {\n        get: function () {\n            return this.attributeObserver.started;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    TokenListObserver.prototype.start = function () {\n        this.attributeObserver.start();\n    };\n    TokenListObserver.prototype.stop = function () {\n        this.attributeObserver.stop();\n    };\n    TokenListObserver.prototype.refresh = function () {\n        this.attributeObserver.refresh();\n    };\n    Object.defineProperty(TokenListObserver.prototype, \"element\", {\n        get: function () {\n            return this.attributeObserver.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TokenListObserver.prototype, \"attributeName\", {\n        get: function () {\n            return this.attributeObserver.attributeName;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // Attribute observer delegate\n    TokenListObserver.prototype.elementMatchedAttribute = function (element) {\n        this.tokensMatched(this.readTokensForElement(element));\n    };\n    TokenListObserver.prototype.elementAttributeValueChanged = function (element) {\n        var _a = this.refreshTokensForElement(element), unmatchedTokens = _a[0], matchedTokens = _a[1];\n        this.tokensUnmatched(unmatchedTokens);\n        this.tokensMatched(matchedTokens);\n    };\n    TokenListObserver.prototype.elementUnmatchedAttribute = function (element) {\n        this.tokensUnmatched(this.tokensByElement.getValuesForKey(element));\n    };\n    TokenListObserver.prototype.tokensMatched = function (tokens) {\n        var _this = this;\n        tokens.forEach(function (token) { return _this.tokenMatched(token); });\n    };\n    TokenListObserver.prototype.tokensUnmatched = function (tokens) {\n        var _this = this;\n        tokens.forEach(function (token) { return _this.tokenUnmatched(token); });\n    };\n    TokenListObserver.prototype.tokenMatched = function (token) {\n        this.delegate.tokenMatched(token);\n        this.tokensByElement.add(token.element, token);\n    };\n    TokenListObserver.prototype.tokenUnmatched = function (token) {\n        this.delegate.tokenUnmatched(token);\n        this.tokensByElement.delete(token.element, token);\n    };\n    TokenListObserver.prototype.refreshTokensForElement = function (element) {\n        var previousTokens = this.tokensByElement.getValuesForKey(element);\n        var currentTokens = this.readTokensForElement(element);\n        var firstDifferingIndex = zip(previousTokens, currentTokens)\n            .findIndex(function (_a) {\n            var previousToken = _a[0], currentToken = _a[1];\n            return !tokensAreEqual(previousToken, currentToken);\n        });\n        if (firstDifferingIndex == -1) {\n            return [[], []];\n        }\n        else {\n            return [previousTokens.slice(firstDifferingIndex), currentTokens.slice(firstDifferingIndex)];\n        }\n    };\n    TokenListObserver.prototype.readTokensForElement = function (element) {\n        var attributeName = this.attributeName;\n        var tokenString = element.getAttribute(attributeName) || \"\";\n        return parseTokenString(tokenString, element, attributeName);\n    };\n    return TokenListObserver;\n}());\nexport { TokenListObserver };\nfunction parseTokenString(tokenString, element, attributeName) {\n    return tokenString.trim().split(/\\s+/).filter(function (content) { return content.length; })\n        .map(function (content, index) { return ({ element: element, attributeName: attributeName, content: content, index: index }); });\n}\nfunction zip(left, right) {\n    var length = Math.max(left.length, right.length);\n    return Array.from({ length: length }, function (_, index) { return [left[index], right[index]]; });\n}\nfunction tokensAreEqual(left, right) {\n    return left && right && left.index == right.index && left.content == right.content;\n}\n//# sourceMappingURL=token_list_observer.js.map","import { TokenListObserver } from \"./token_list_observer\";\nvar ValueListObserver = /** @class */ (function () {\n    function ValueListObserver(element, attributeName, delegate) {\n        this.tokenListObserver = new TokenListObserver(element, attributeName, this);\n        this.delegate = delegate;\n        this.parseResultsByToken = new WeakMap;\n        this.valuesByTokenByElement = new WeakMap;\n    }\n    Object.defineProperty(ValueListObserver.prototype, \"started\", {\n        get: function () {\n            return this.tokenListObserver.started;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ValueListObserver.prototype.start = function () {\n        this.tokenListObserver.start();\n    };\n    ValueListObserver.prototype.stop = function () {\n        this.tokenListObserver.stop();\n    };\n    ValueListObserver.prototype.refresh = function () {\n        this.tokenListObserver.refresh();\n    };\n    Object.defineProperty(ValueListObserver.prototype, \"element\", {\n        get: function () {\n            return this.tokenListObserver.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ValueListObserver.prototype, \"attributeName\", {\n        get: function () {\n            return this.tokenListObserver.attributeName;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ValueListObserver.prototype.tokenMatched = function (token) {\n        var element = token.element;\n        var value = this.fetchParseResultForToken(token).value;\n        if (value) {\n            this.fetchValuesByTokenForElement(element).set(token, value);\n            this.delegate.elementMatchedValue(element, value);\n        }\n    };\n    ValueListObserver.prototype.tokenUnmatched = function (token) {\n        var element = token.element;\n        var value = this.fetchParseResultForToken(token).value;\n        if (value) {\n            this.fetchValuesByTokenForElement(element).delete(token);\n            this.delegate.elementUnmatchedValue(element, value);\n        }\n    };\n    ValueListObserver.prototype.fetchParseResultForToken = function (token) {\n        var parseResult = this.parseResultsByToken.get(token);\n        if (!parseResult) {\n            parseResult = this.parseToken(token);\n            this.parseResultsByToken.set(token, parseResult);\n        }\n        return parseResult;\n    };\n    ValueListObserver.prototype.fetchValuesByTokenForElement = function (element) {\n        var valuesByToken = this.valuesByTokenByElement.get(element);\n        if (!valuesByToken) {\n            valuesByToken = new Map;\n            this.valuesByTokenByElement.set(element, valuesByToken);\n        }\n        return valuesByToken;\n    };\n    ValueListObserver.prototype.parseToken = function (token) {\n        try {\n            var value = this.delegate.parseValueForToken(token);\n            return { value: value };\n        }\n        catch (error) {\n            return { error: error };\n        }\n    };\n    return ValueListObserver;\n}());\nexport { ValueListObserver };\n//# sourceMappingURL=value_list_observer.js.map","import { Action } from \"./action\";\nimport { Binding } from \"./binding\";\nimport { ValueListObserver } from \"@stimulus/mutation-observers\";\nvar BindingObserver = /** @class */ (function () {\n    function BindingObserver(context, delegate) {\n        this.context = context;\n        this.delegate = delegate;\n        this.bindingsByAction = new Map;\n    }\n    BindingObserver.prototype.start = function () {\n        if (!this.valueListObserver) {\n            this.valueListObserver = new ValueListObserver(this.element, this.actionAttribute, this);\n            this.valueListObserver.start();\n        }\n    };\n    BindingObserver.prototype.stop = function () {\n        if (this.valueListObserver) {\n            this.valueListObserver.stop();\n            delete this.valueListObserver;\n            this.disconnectAllActions();\n        }\n    };\n    Object.defineProperty(BindingObserver.prototype, \"element\", {\n        get: function () {\n            return this.context.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BindingObserver.prototype, \"identifier\", {\n        get: function () {\n            return this.context.identifier;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BindingObserver.prototype, \"actionAttribute\", {\n        get: function () {\n            return this.schema.actionAttribute;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BindingObserver.prototype, \"schema\", {\n        get: function () {\n            return this.context.schema;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BindingObserver.prototype, \"bindings\", {\n        get: function () {\n            return Array.from(this.bindingsByAction.values());\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BindingObserver.prototype.connectAction = function (action) {\n        var binding = new Binding(this.context, action);\n        this.bindingsByAction.set(action, binding);\n        this.delegate.bindingConnected(binding);\n    };\n    BindingObserver.prototype.disconnectAction = function (action) {\n        var binding = this.bindingsByAction.get(action);\n        if (binding) {\n            this.bindingsByAction.delete(action);\n            this.delegate.bindingDisconnected(binding);\n        }\n    };\n    BindingObserver.prototype.disconnectAllActions = function () {\n        var _this = this;\n        this.bindings.forEach(function (binding) { return _this.delegate.bindingDisconnected(binding); });\n        this.bindingsByAction.clear();\n    };\n    // Value observer delegate\n    BindingObserver.prototype.parseValueForToken = function (token) {\n        var action = Action.forToken(token);\n        if (action.identifier == this.identifier) {\n            return action;\n        }\n    };\n    BindingObserver.prototype.elementMatchedValue = function (element, action) {\n        this.connectAction(action);\n    };\n    BindingObserver.prototype.elementUnmatchedValue = function (element, action) {\n        this.disconnectAction(action);\n    };\n    return BindingObserver;\n}());\nexport { BindingObserver };\n//# sourceMappingURL=binding_observer.js.map","import { StringMapObserver } from \"@stimulus/mutation-observers\";\nvar ValueObserver = /** @class */ (function () {\n    function ValueObserver(context, receiver) {\n        this.context = context;\n        this.receiver = receiver;\n        this.stringMapObserver = new StringMapObserver(this.element, this);\n        this.valueDescriptorMap = this.controller.valueDescriptorMap;\n        this.invokeChangedCallbacksForDefaultValues();\n    }\n    ValueObserver.prototype.start = function () {\n        this.stringMapObserver.start();\n    };\n    ValueObserver.prototype.stop = function () {\n        this.stringMapObserver.stop();\n    };\n    Object.defineProperty(ValueObserver.prototype, \"element\", {\n        get: function () {\n            return this.context.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ValueObserver.prototype, \"controller\", {\n        get: function () {\n            return this.context.controller;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // String map observer delegate\n    ValueObserver.prototype.getStringMapKeyForAttribute = function (attributeName) {\n        if (attributeName in this.valueDescriptorMap) {\n            return this.valueDescriptorMap[attributeName].name;\n        }\n    };\n    ValueObserver.prototype.stringMapValueChanged = function (attributeValue, name) {\n        this.invokeChangedCallbackForValue(name);\n    };\n    ValueObserver.prototype.invokeChangedCallbacksForDefaultValues = function () {\n        for (var _i = 0, _a = this.valueDescriptors; _i < _a.length; _i++) {\n            var _b = _a[_i], key = _b.key, name_1 = _b.name, defaultValue = _b.defaultValue;\n            if (defaultValue != undefined && !this.controller.data.has(key)) {\n                this.invokeChangedCallbackForValue(name_1);\n            }\n        }\n    };\n    ValueObserver.prototype.invokeChangedCallbackForValue = function (name) {\n        var methodName = name + \"Changed\";\n        var method = this.receiver[methodName];\n        if (typeof method == \"function\") {\n            var value = this.receiver[name];\n            method.call(this.receiver, value);\n        }\n    };\n    Object.defineProperty(ValueObserver.prototype, \"valueDescriptors\", {\n        get: function () {\n            var valueDescriptorMap = this.valueDescriptorMap;\n            return Object.keys(valueDescriptorMap).map(function (key) { return valueDescriptorMap[key]; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return ValueObserver;\n}());\nexport { ValueObserver };\n//# sourceMappingURL=value_observer.js.map","import { BindingObserver } from \"./binding_observer\";\nimport { ValueObserver } from \"./value_observer\";\nvar Context = /** @class */ (function () {\n    function Context(module, scope) {\n        this.module = module;\n        this.scope = scope;\n        this.controller = new module.controllerConstructor(this);\n        this.bindingObserver = new BindingObserver(this, this.dispatcher);\n        this.valueObserver = new ValueObserver(this, this.controller);\n        try {\n            this.controller.initialize();\n        }\n        catch (error) {\n            this.handleError(error, \"initializing controller\");\n        }\n    }\n    Context.prototype.connect = function () {\n        this.bindingObserver.start();\n        this.valueObserver.start();\n        try {\n            this.controller.connect();\n        }\n        catch (error) {\n            this.handleError(error, \"connecting controller\");\n        }\n    };\n    Context.prototype.disconnect = function () {\n        try {\n            this.controller.disconnect();\n        }\n        catch (error) {\n            this.handleError(error, \"disconnecting controller\");\n        }\n        this.valueObserver.stop();\n        this.bindingObserver.stop();\n    };\n    Object.defineProperty(Context.prototype, \"application\", {\n        get: function () {\n            return this.module.application;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"identifier\", {\n        get: function () {\n            return this.module.identifier;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"schema\", {\n        get: function () {\n            return this.application.schema;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"dispatcher\", {\n        get: function () {\n            return this.application.dispatcher;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"parentElement\", {\n        get: function () {\n            return this.element.parentElement;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // Error handling\n    Context.prototype.handleError = function (error, message, detail) {\n        if (detail === void 0) { detail = {}; }\n        var _a = this, identifier = _a.identifier, controller = _a.controller, element = _a.element;\n        detail = Object.assign({ identifier: identifier, controller: controller, element: element }, detail);\n        this.application.handleError(error, \"Error \" + message, detail);\n    };\n    return Context;\n}());\nexport { Context };\n//# sourceMappingURL=context.js.map","export function readInheritableStaticArrayValues(constructor, propertyName) {\n    var ancestors = getAncestorsForConstructor(constructor);\n    return Array.from(ancestors.reduce(function (values, constructor) {\n        getOwnStaticArrayValues(constructor, propertyName).forEach(function (name) { return values.add(name); });\n        return values;\n    }, new Set));\n}\nexport function readInheritableStaticObjectPairs(constructor, propertyName) {\n    var ancestors = getAncestorsForConstructor(constructor);\n    return ancestors.reduce(function (pairs, constructor) {\n        pairs.push.apply(pairs, getOwnStaticObjectPairs(constructor, propertyName));\n        return pairs;\n    }, []);\n}\nfunction getAncestorsForConstructor(constructor) {\n    var ancestors = [];\n    while (constructor) {\n        ancestors.push(constructor);\n        constructor = Object.getPrototypeOf(constructor);\n    }\n    return ancestors.reverse();\n}\nfunction getOwnStaticArrayValues(constructor, propertyName) {\n    var definition = constructor[propertyName];\n    return Array.isArray(definition) ? definition : [];\n}\nfunction getOwnStaticObjectPairs(constructor, propertyName) {\n    var definition = constructor[propertyName];\n    return definition ? Object.keys(definition).map(function (key) { return [key, definition[key]]; }) : [];\n}\n//# sourceMappingURL=inheritable_statics.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { readInheritableStaticArrayValues } from \"./inheritable_statics\";\n/** @hidden */\nexport function bless(constructor) {\n    return shadow(constructor, getBlessedProperties(constructor));\n}\nfunction shadow(constructor, properties) {\n    var shadowConstructor = extend(constructor);\n    var shadowProperties = getShadowProperties(constructor.prototype, properties);\n    Object.defineProperties(shadowConstructor.prototype, shadowProperties);\n    return shadowConstructor;\n}\nfunction getBlessedProperties(constructor) {\n    var blessings = readInheritableStaticArrayValues(constructor, \"blessings\");\n    return blessings.reduce(function (blessedProperties, blessing) {\n        var properties = blessing(constructor);\n        for (var key in properties) {\n            var descriptor = blessedProperties[key] || {};\n            blessedProperties[key] = Object.assign(descriptor, properties[key]);\n        }\n        return blessedProperties;\n    }, {});\n}\nfunction getShadowProperties(prototype, properties) {\n    return getOwnKeys(properties).reduce(function (shadowProperties, key) {\n        var _a;\n        var descriptor = getShadowedDescriptor(prototype, properties, key);\n        if (descriptor) {\n            Object.assign(shadowProperties, (_a = {}, _a[key] = descriptor, _a));\n        }\n        return shadowProperties;\n    }, {});\n}\nfunction getShadowedDescriptor(prototype, properties, key) {\n    var shadowingDescriptor = Object.getOwnPropertyDescriptor(prototype, key);\n    var shadowedByValue = shadowingDescriptor && \"value\" in shadowingDescriptor;\n    if (!shadowedByValue) {\n        var descriptor = Object.getOwnPropertyDescriptor(properties, key).value;\n        if (shadowingDescriptor) {\n            descriptor.get = shadowingDescriptor.get || descriptor.get;\n            descriptor.set = shadowingDescriptor.set || descriptor.set;\n        }\n        return descriptor;\n    }\n}\nvar getOwnKeys = (function () {\n    if (typeof Object.getOwnPropertySymbols == \"function\") {\n        return function (object) { return __spreadArrays(Object.getOwnPropertyNames(object), Object.getOwnPropertySymbols(object)); };\n    }\n    else {\n        return Object.getOwnPropertyNames;\n    }\n})();\nvar extend = (function () {\n    function extendWithReflect(constructor) {\n        function extended() {\n            var _newTarget = this && this instanceof extended ? this.constructor : void 0;\n            return Reflect.construct(constructor, arguments, _newTarget);\n        }\n        extended.prototype = Object.create(constructor.prototype, {\n            constructor: { value: extended }\n        });\n        Reflect.setPrototypeOf(extended, constructor);\n        return extended;\n    }\n    function testReflectExtension() {\n        var a = function () { this.a.call(this); };\n        var b = extendWithReflect(a);\n        b.prototype.a = function () { };\n        return new b;\n    }\n    try {\n        testReflectExtension();\n        return extendWithReflect;\n    }\n    catch (error) {\n        return function (constructor) { return /** @class */ (function (_super) {\n            __extends(extended, _super);\n            function extended() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            return extended;\n        }(constructor)); };\n    }\n})();\n//# sourceMappingURL=blessing.js.map","import { Context } from \"./context\";\nimport { blessDefinition } from \"./definition\";\nvar Module = /** @class */ (function () {\n    function Module(application, definition) {\n        this.application = application;\n        this.definition = blessDefinition(definition);\n        this.contextsByScope = new WeakMap;\n        this.connectedContexts = new Set;\n    }\n    Object.defineProperty(Module.prototype, \"identifier\", {\n        get: function () {\n            return this.definition.identifier;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Module.prototype, \"controllerConstructor\", {\n        get: function () {\n            return this.definition.controllerConstructor;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Module.prototype, \"contexts\", {\n        get: function () {\n            return Array.from(this.connectedContexts);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Module.prototype.connectContextForScope = function (scope) {\n        var context = this.fetchContextForScope(scope);\n        this.connectedContexts.add(context);\n        context.connect();\n    };\n    Module.prototype.disconnectContextForScope = function (scope) {\n        var context = this.contextsByScope.get(scope);\n        if (context) {\n            this.connectedContexts.delete(context);\n            context.disconnect();\n        }\n    };\n    Module.prototype.fetchContextForScope = function (scope) {\n        var context = this.contextsByScope.get(scope);\n        if (!context) {\n            context = new Context(this, scope);\n            this.contextsByScope.set(scope, context);\n        }\n        return context;\n    };\n    return Module;\n}());\nexport { Module };\n//# sourceMappingURL=module.js.map","import { bless } from \"./blessing\";\n/** @hidden */\nexport function blessDefinition(definition) {\n    return {\n        identifier: definition.identifier,\n        controllerConstructor: bless(definition.controllerConstructor)\n    };\n}\n//# sourceMappingURL=definition.js.map","var ClassMap = /** @class */ (function () {\n    function ClassMap(scope) {\n        this.scope = scope;\n    }\n    ClassMap.prototype.has = function (name) {\n        return this.data.has(this.getDataKey(name));\n    };\n    ClassMap.prototype.get = function (name) {\n        return this.data.get(this.getDataKey(name));\n    };\n    ClassMap.prototype.getAttributeName = function (name) {\n        return this.data.getAttributeNameForKey(this.getDataKey(name));\n    };\n    ClassMap.prototype.getDataKey = function (name) {\n        return name + \"-class\";\n    };\n    Object.defineProperty(ClassMap.prototype, \"data\", {\n        get: function () {\n            return this.scope.data;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return ClassMap;\n}());\nexport { ClassMap };\n//# sourceMappingURL=class_map.js.map","export function camelize(value) {\n    return value.replace(/(?:[_-])([a-z0-9])/g, function (_, char) { return char.toUpperCase(); });\n}\nexport function capitalize(value) {\n    return value.charAt(0).toUpperCase() + value.slice(1);\n}\nexport function dasherize(value) {\n    return value.replace(/([A-Z])/g, function (_, char) { return \"-\" + char.toLowerCase(); });\n}\n//# sourceMappingURL=string_helpers.js.map","import { dasherize } from \"./string_helpers\";\nvar DataMap = /** @class */ (function () {\n    function DataMap(scope) {\n        this.scope = scope;\n    }\n    Object.defineProperty(DataMap.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DataMap.prototype, \"identifier\", {\n        get: function () {\n            return this.scope.identifier;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DataMap.prototype.get = function (key) {\n        var name = this.getAttributeNameForKey(key);\n        return this.element.getAttribute(name);\n    };\n    DataMap.prototype.set = function (key, value) {\n        var name = this.getAttributeNameForKey(key);\n        this.element.setAttribute(name, value);\n        return this.get(key);\n    };\n    DataMap.prototype.has = function (key) {\n        var name = this.getAttributeNameForKey(key);\n        return this.element.hasAttribute(name);\n    };\n    DataMap.prototype.delete = function (key) {\n        if (this.has(key)) {\n            var name_1 = this.getAttributeNameForKey(key);\n            this.element.removeAttribute(name_1);\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    DataMap.prototype.getAttributeNameForKey = function (key) {\n        return \"data-\" + this.identifier + \"-\" + dasherize(key);\n    };\n    return DataMap;\n}());\nexport { DataMap };\n//# sourceMappingURL=data_map.js.map","var Guide = /** @class */ (function () {\n    function Guide(logger) {\n        this.warnedKeysByObject = new WeakMap;\n        this.logger = logger;\n    }\n    Guide.prototype.warn = function (object, key, message) {\n        var warnedKeys = this.warnedKeysByObject.get(object);\n        if (!warnedKeys) {\n            warnedKeys = new Set;\n            this.warnedKeysByObject.set(object, warnedKeys);\n        }\n        if (!warnedKeys.has(key)) {\n            warnedKeys.add(key);\n            this.logger.warn(message, object);\n        }\n    };\n    return Guide;\n}());\nexport { Guide };\n//# sourceMappingURL=guide.js.map","/** @hidden */\nexport function attributeValueContainsToken(attributeName, token) {\n    return \"[\" + attributeName + \"~=\\\"\" + token + \"\\\"]\";\n}\n//# sourceMappingURL=selectors.js.map","var __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { attributeValueContainsToken } from \"./selectors\";\nvar TargetSet = /** @class */ (function () {\n    function TargetSet(scope) {\n        this.scope = scope;\n    }\n    Object.defineProperty(TargetSet.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TargetSet.prototype, \"identifier\", {\n        get: function () {\n            return this.scope.identifier;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(TargetSet.prototype, \"schema\", {\n        get: function () {\n            return this.scope.schema;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    TargetSet.prototype.has = function (targetName) {\n        return this.find(targetName) != null;\n    };\n    TargetSet.prototype.find = function () {\n        var _this = this;\n        var targetNames = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            targetNames[_i] = arguments[_i];\n        }\n        return targetNames.reduce(function (target, targetName) {\n            return target\n                || _this.findTarget(targetName)\n                || _this.findLegacyTarget(targetName);\n        }, undefined);\n    };\n    TargetSet.prototype.findAll = function () {\n        var _this = this;\n        var targetNames = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            targetNames[_i] = arguments[_i];\n        }\n        return targetNames.reduce(function (targets, targetName) { return __spreadArrays(targets, _this.findAllTargets(targetName), _this.findAllLegacyTargets(targetName)); }, []);\n    };\n    TargetSet.prototype.findTarget = function (targetName) {\n        var selector = this.getSelectorForTargetName(targetName);\n        return this.scope.findElement(selector);\n    };\n    TargetSet.prototype.findAllTargets = function (targetName) {\n        var selector = this.getSelectorForTargetName(targetName);\n        return this.scope.findAllElements(selector);\n    };\n    TargetSet.prototype.getSelectorForTargetName = function (targetName) {\n        var attributeName = \"data-\" + this.identifier + \"-target\";\n        return attributeValueContainsToken(attributeName, targetName);\n    };\n    TargetSet.prototype.findLegacyTarget = function (targetName) {\n        var selector = this.getLegacySelectorForTargetName(targetName);\n        return this.deprecate(this.scope.findElement(selector), targetName);\n    };\n    TargetSet.prototype.findAllLegacyTargets = function (targetName) {\n        var _this = this;\n        var selector = this.getLegacySelectorForTargetName(targetName);\n        return this.scope.findAllElements(selector).map(function (element) { return _this.deprecate(element, targetName); });\n    };\n    TargetSet.prototype.getLegacySelectorForTargetName = function (targetName) {\n        var targetDescriptor = this.identifier + \".\" + targetName;\n        return attributeValueContainsToken(this.schema.targetAttribute, targetDescriptor);\n    };\n    TargetSet.prototype.deprecate = function (element, targetName) {\n        if (element) {\n            var identifier = this.identifier;\n            var attributeName = this.schema.targetAttribute;\n            this.guide.warn(element, \"target:\" + targetName, \"Please replace \" + attributeName + \"=\\\"\" + identifier + \".\" + targetName + \"\\\" with data-\" + identifier + \"-target=\\\"\" + targetName + \"\\\". \" +\n                (\"The \" + attributeName + \" attribute is deprecated and will be removed in a future version of Stimulus.\"));\n        }\n        return element;\n    };\n    Object.defineProperty(TargetSet.prototype, \"guide\", {\n        get: function () {\n            return this.scope.guide;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return TargetSet;\n}());\nexport { TargetSet };\n//# sourceMappingURL=target_set.js.map","var __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { ClassMap } from \"./class_map\";\nimport { DataMap } from \"./data_map\";\nimport { Guide } from \"./guide\";\nimport { attributeValueContainsToken } from \"./selectors\";\nimport { TargetSet } from \"./target_set\";\nvar Scope = /** @class */ (function () {\n    function Scope(schema, element, identifier, logger) {\n        var _this = this;\n        this.targets = new TargetSet(this);\n        this.classes = new ClassMap(this);\n        this.data = new DataMap(this);\n        this.containsElement = function (element) {\n            return element.closest(_this.controllerSelector) === _this.element;\n        };\n        this.schema = schema;\n        this.element = element;\n        this.identifier = identifier;\n        this.guide = new Guide(logger);\n    }\n    Scope.prototype.findElement = function (selector) {\n        return this.element.matches(selector)\n            ? this.element\n            : this.queryElements(selector).find(this.containsElement);\n    };\n    Scope.prototype.findAllElements = function (selector) {\n        return __spreadArrays(this.element.matches(selector) ? [this.element] : [], this.queryElements(selector).filter(this.containsElement));\n    };\n    Scope.prototype.queryElements = function (selector) {\n        return Array.from(this.element.querySelectorAll(selector));\n    };\n    Object.defineProperty(Scope.prototype, \"controllerSelector\", {\n        get: function () {\n            return attributeValueContainsToken(this.schema.controllerAttribute, this.identifier);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Scope;\n}());\nexport { Scope };\n//# sourceMappingURL=scope.js.map","import { ValueListObserver } from \"@stimulus/mutation-observers\";\nvar ScopeObserver = /** @class */ (function () {\n    function ScopeObserver(element, schema, delegate) {\n        this.element = element;\n        this.schema = schema;\n        this.delegate = delegate;\n        this.valueListObserver = new ValueListObserver(this.element, this.controllerAttribute, this);\n        this.scopesByIdentifierByElement = new WeakMap;\n        this.scopeReferenceCounts = new WeakMap;\n    }\n    ScopeObserver.prototype.start = function () {\n        this.valueListObserver.start();\n    };\n    ScopeObserver.prototype.stop = function () {\n        this.valueListObserver.stop();\n    };\n    Object.defineProperty(ScopeObserver.prototype, \"controllerAttribute\", {\n        get: function () {\n            return this.schema.controllerAttribute;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // Value observer delegate\n    /** @hidden */\n    ScopeObserver.prototype.parseValueForToken = function (token) {\n        var element = token.element, identifier = token.content;\n        var scopesByIdentifier = this.fetchScopesByIdentifierForElement(element);\n        var scope = scopesByIdentifier.get(identifier);\n        if (!scope) {\n            scope = this.delegate.createScopeForElementAndIdentifier(element, identifier);\n            scopesByIdentifier.set(identifier, scope);\n        }\n        return scope;\n    };\n    /** @hidden */\n    ScopeObserver.prototype.elementMatchedValue = function (element, value) {\n        var referenceCount = (this.scopeReferenceCounts.get(value) || 0) + 1;\n        this.scopeReferenceCounts.set(value, referenceCount);\n        if (referenceCount == 1) {\n            this.delegate.scopeConnected(value);\n        }\n    };\n    /** @hidden */\n    ScopeObserver.prototype.elementUnmatchedValue = function (element, value) {\n        var referenceCount = this.scopeReferenceCounts.get(value);\n        if (referenceCount) {\n            this.scopeReferenceCounts.set(value, referenceCount - 1);\n            if (referenceCount == 1) {\n                this.delegate.scopeDisconnected(value);\n            }\n        }\n    };\n    ScopeObserver.prototype.fetchScopesByIdentifierForElement = function (element) {\n        var scopesByIdentifier = this.scopesByIdentifierByElement.get(element);\n        if (!scopesByIdentifier) {\n            scopesByIdentifier = new Map;\n            this.scopesByIdentifierByElement.set(element, scopesByIdentifier);\n        }\n        return scopesByIdentifier;\n    };\n    return ScopeObserver;\n}());\nexport { ScopeObserver };\n//# sourceMappingURL=scope_observer.js.map","import { Module } from \"./module\";\nimport { Multimap } from \"@stimulus/multimap\";\nimport { Scope } from \"./scope\";\nimport { ScopeObserver } from \"./scope_observer\";\nvar Router = /** @class */ (function () {\n    function Router(application) {\n        this.application = application;\n        this.scopeObserver = new ScopeObserver(this.element, this.schema, this);\n        this.scopesByIdentifier = new Multimap;\n        this.modulesByIdentifier = new Map;\n    }\n    Object.defineProperty(Router.prototype, \"element\", {\n        get: function () {\n            return this.application.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"schema\", {\n        get: function () {\n            return this.application.schema;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"logger\", {\n        get: function () {\n            return this.application.logger;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"controllerAttribute\", {\n        get: function () {\n            return this.schema.controllerAttribute;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"modules\", {\n        get: function () {\n            return Array.from(this.modulesByIdentifier.values());\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"contexts\", {\n        get: function () {\n            return this.modules.reduce(function (contexts, module) { return contexts.concat(module.contexts); }, []);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Router.prototype.start = function () {\n        this.scopeObserver.start();\n    };\n    Router.prototype.stop = function () {\n        this.scopeObserver.stop();\n    };\n    Router.prototype.loadDefinition = function (definition) {\n        this.unloadIdentifier(definition.identifier);\n        var module = new Module(this.application, definition);\n        this.connectModule(module);\n    };\n    Router.prototype.unloadIdentifier = function (identifier) {\n        var module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            this.disconnectModule(module);\n        }\n    };\n    Router.prototype.getContextForElementAndIdentifier = function (element, identifier) {\n        var module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            return module.contexts.find(function (context) { return context.element == element; });\n        }\n    };\n    // Error handler delegate\n    /** @hidden */\n    Router.prototype.handleError = function (error, message, detail) {\n        this.application.handleError(error, message, detail);\n    };\n    // Scope observer delegate\n    /** @hidden */\n    Router.prototype.createScopeForElementAndIdentifier = function (element, identifier) {\n        return new Scope(this.schema, element, identifier, this.logger);\n    };\n    /** @hidden */\n    Router.prototype.scopeConnected = function (scope) {\n        this.scopesByIdentifier.add(scope.identifier, scope);\n        var module = this.modulesByIdentifier.get(scope.identifier);\n        if (module) {\n            module.connectContextForScope(scope);\n        }\n    };\n    /** @hidden */\n    Router.prototype.scopeDisconnected = function (scope) {\n        this.scopesByIdentifier.delete(scope.identifier, scope);\n        var module = this.modulesByIdentifier.get(scope.identifier);\n        if (module) {\n            module.disconnectContextForScope(scope);\n        }\n    };\n    // Modules\n    Router.prototype.connectModule = function (module) {\n        this.modulesByIdentifier.set(module.identifier, module);\n        var scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);\n        scopes.forEach(function (scope) { return module.connectContextForScope(scope); });\n    };\n    Router.prototype.disconnectModule = function (module) {\n        this.modulesByIdentifier.delete(module.identifier);\n        var scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);\n        scopes.forEach(function (scope) { return module.disconnectContextForScope(scope); });\n    };\n    return Router;\n}());\nexport { Router };\n//# sourceMappingURL=router.js.map","export var defaultSchema = {\n    controllerAttribute: \"data-controller\",\n    actionAttribute: \"data-action\",\n    targetAttribute: \"data-target\"\n};\n//# sourceMappingURL=schema.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { Dispatcher } from \"./dispatcher\";\nimport { Router } from \"./router\";\nimport { defaultSchema } from \"./schema\";\nvar Application = /** @class */ (function () {\n    function Application(element, schema) {\n        if (element === void 0) { element = document.documentElement; }\n        if (schema === void 0) { schema = defaultSchema; }\n        this.logger = console;\n        this.element = element;\n        this.schema = schema;\n        this.dispatcher = new Dispatcher(this);\n        this.router = new Router(this);\n    }\n    Application.start = function (element, schema) {\n        var application = new Application(element, schema);\n        application.start();\n        return application;\n    };\n    Application.prototype.start = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, domReady()];\n                    case 1:\n                        _a.sent();\n                        this.dispatcher.start();\n                        this.router.start();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Application.prototype.stop = function () {\n        this.dispatcher.stop();\n        this.router.stop();\n    };\n    Application.prototype.register = function (identifier, controllerConstructor) {\n        this.load({ identifier: identifier, controllerConstructor: controllerConstructor });\n    };\n    Application.prototype.load = function (head) {\n        var _this = this;\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            rest[_i - 1] = arguments[_i];\n        }\n        var definitions = Array.isArray(head) ? head : __spreadArrays([head], rest);\n        definitions.forEach(function (definition) { return _this.router.loadDefinition(definition); });\n    };\n    Application.prototype.unload = function (head) {\n        var _this = this;\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            rest[_i - 1] = arguments[_i];\n        }\n        var identifiers = Array.isArray(head) ? head : __spreadArrays([head], rest);\n        identifiers.forEach(function (identifier) { return _this.router.unloadIdentifier(identifier); });\n    };\n    Object.defineProperty(Application.prototype, \"controllers\", {\n        // Controllers\n        get: function () {\n            return this.router.contexts.map(function (context) { return context.controller; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Application.prototype.getControllerForElementAndIdentifier = function (element, identifier) {\n        var context = this.router.getContextForElementAndIdentifier(element, identifier);\n        return context ? context.controller : null;\n    };\n    // Error handling\n    Application.prototype.handleError = function (error, message, detail) {\n        this.logger.error(\"%s\\n\\n%o\\n\\n%o\", message, error, detail);\n    };\n    return Application;\n}());\nexport { Application };\nfunction domReady() {\n    return new Promise(function (resolve) {\n        if (document.readyState == \"loading\") {\n            document.addEventListener(\"DOMContentLoaded\", resolve);\n        }\n        else {\n            resolve();\n        }\n    });\n}\n//# sourceMappingURL=application.js.map","import { readInheritableStaticArrayValues } from \"./inheritable_statics\";\nimport { capitalize } from \"./string_helpers\";\n/** @hidden */\nexport function ClassPropertiesBlessing(constructor) {\n    var classes = readInheritableStaticArrayValues(constructor, \"classes\");\n    return classes.reduce(function (properties, classDefinition) {\n        return Object.assign(properties, propertiesForClassDefinition(classDefinition));\n    }, {});\n}\nfunction propertiesForClassDefinition(key) {\n    var _a;\n    var name = key + \"Class\";\n    return _a = {},\n        _a[name] = {\n            get: function () {\n                var classes = this.classes;\n                if (classes.has(key)) {\n                    return classes.get(key);\n                }\n                else {\n                    var attribute = classes.getAttributeName(key);\n                    throw new Error(\"Missing attribute \\\"\" + attribute + \"\\\"\");\n                }\n            }\n        },\n        _a[\"has\" + capitalize(name)] = {\n            get: function () {\n                return this.classes.has(key);\n            }\n        },\n        _a;\n}\n//# sourceMappingURL=class_properties.js.map","import { readInheritableStaticArrayValues } from \"./inheritable_statics\";\nimport { capitalize } from \"./string_helpers\";\n/** @hidden */\nexport function TargetPropertiesBlessing(constructor) {\n    var targets = readInheritableStaticArrayValues(constructor, \"targets\");\n    return targets.reduce(function (properties, targetDefinition) {\n        return Object.assign(properties, propertiesForTargetDefinition(targetDefinition));\n    }, {});\n}\nfunction propertiesForTargetDefinition(name) {\n    var _a;\n    return _a = {},\n        _a[name + \"Target\"] = {\n            get: function () {\n                var target = this.targets.find(name);\n                if (target) {\n                    return target;\n                }\n                else {\n                    throw new Error(\"Missing target element \\\"\" + this.identifier + \".\" + name + \"\\\"\");\n                }\n            }\n        },\n        _a[name + \"Targets\"] = {\n            get: function () {\n                return this.targets.findAll(name);\n            }\n        },\n        _a[\"has\" + capitalize(name) + \"Target\"] = {\n            get: function () {\n                return this.targets.has(name);\n            }\n        },\n        _a;\n}\n//# sourceMappingURL=target_properties.js.map","import { readInheritableStaticObjectPairs } from \"./inheritable_statics\";\nimport { camelize, capitalize, dasherize } from \"./string_helpers\";\n/** @hidden */\nexport function ValuePropertiesBlessing(constructor) {\n    var valueDefinitionPairs = readInheritableStaticObjectPairs(constructor, \"values\");\n    var propertyDescriptorMap = {\n        valueDescriptorMap: {\n            get: function () {\n                var _this = this;\n                return valueDefinitionPairs.reduce(function (result, valueDefinitionPair) {\n                    var _a;\n                    var valueDescriptor = parseValueDefinitionPair(valueDefinitionPair);\n                    var attributeName = _this.data.getAttributeNameForKey(valueDescriptor.key);\n                    return Object.assign(result, (_a = {}, _a[attributeName] = valueDescriptor, _a));\n                }, {});\n            }\n        }\n    };\n    return valueDefinitionPairs.reduce(function (properties, valueDefinitionPair) {\n        return Object.assign(properties, propertiesForValueDefinitionPair(valueDefinitionPair));\n    }, propertyDescriptorMap);\n}\n/** @hidden */\nexport function propertiesForValueDefinitionPair(valueDefinitionPair) {\n    var _a;\n    var definition = parseValueDefinitionPair(valueDefinitionPair);\n    var type = definition.type, key = definition.key, name = definition.name;\n    var read = readers[type], write = writers[type] || writers.default;\n    return _a = {},\n        _a[name] = {\n            get: function () {\n                var value = this.data.get(key);\n                if (value !== null) {\n                    return read(value);\n                }\n                else {\n                    return definition.defaultValue;\n                }\n            },\n            set: function (value) {\n                if (value === undefined) {\n                    this.data.delete(key);\n                }\n                else {\n                    this.data.set(key, write(value));\n                }\n            }\n        },\n        _a[\"has\" + capitalize(name)] = {\n            get: function () {\n                return this.data.has(key);\n            }\n        },\n        _a;\n}\nfunction parseValueDefinitionPair(_a) {\n    var token = _a[0], typeConstant = _a[1];\n    var type = parseValueTypeConstant(typeConstant);\n    return valueDescriptorForTokenAndType(token, type);\n}\nfunction parseValueTypeConstant(typeConstant) {\n    switch (typeConstant) {\n        case Array: return \"array\";\n        case Boolean: return \"boolean\";\n        case Number: return \"number\";\n        case Object: return \"object\";\n        case String: return \"string\";\n    }\n    throw new Error(\"Unknown value type constant \\\"\" + typeConstant + \"\\\"\");\n}\nfunction valueDescriptorForTokenAndType(token, type) {\n    var key = dasherize(token) + \"-value\";\n    return {\n        type: type,\n        key: key,\n        name: camelize(key),\n        get defaultValue() { return defaultValuesByType[type]; }\n    };\n}\nvar defaultValuesByType = {\n    get array() { return []; },\n    boolean: false,\n    number: 0,\n    get object() { return {}; },\n    string: \"\"\n};\nvar readers = {\n    array: function (value) {\n        var array = JSON.parse(value);\n        if (!Array.isArray(array)) {\n            throw new TypeError(\"Expected array\");\n        }\n        return array;\n    },\n    boolean: function (value) {\n        return !(value == \"0\" || value == \"false\");\n    },\n    number: function (value) {\n        return parseFloat(value);\n    },\n    object: function (value) {\n        var object = JSON.parse(value);\n        if (object === null || typeof object != \"object\" || Array.isArray(object)) {\n            throw new TypeError(\"Expected object\");\n        }\n        return object;\n    },\n    string: function (value) {\n        return value;\n    }\n};\nvar writers = {\n    default: writeString,\n    array: writeJSON,\n    object: writeJSON\n};\nfunction writeJSON(value) {\n    return JSON.stringify(value);\n}\nfunction writeString(value) {\n    return \"\" + value;\n}\n//# sourceMappingURL=value_properties.js.map","import { ClassPropertiesBlessing } from \"./class_properties\";\nimport { TargetPropertiesBlessing } from \"./target_properties\";\nimport { ValuePropertiesBlessing } from \"./value_properties\";\nvar Controller = /** @class */ (function () {\n    function Controller(context) {\n        this.context = context;\n    }\n    Object.defineProperty(Controller.prototype, \"application\", {\n        get: function () {\n            return this.context.application;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"scope\", {\n        get: function () {\n            return this.context.scope;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"identifier\", {\n        get: function () {\n            return this.scope.identifier;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"targets\", {\n        get: function () {\n            return this.scope.targets;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"classes\", {\n        get: function () {\n            return this.scope.classes;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"data\", {\n        get: function () {\n            return this.scope.data;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Controller.prototype.initialize = function () {\n        // Override in your subclass to set up initial controller state\n    };\n    Controller.prototype.connect = function () {\n        // Override in your subclass to respond when the controller is connected to the DOM\n    };\n    Controller.prototype.disconnect = function () {\n        // Override in your subclass to respond when the controller is disconnected from the DOM\n    };\n    Controller.blessings = [ClassPropertiesBlessing, TargetPropertiesBlessing, ValuePropertiesBlessing];\n    Controller.targets = [];\n    Controller.values = {};\n    return Controller;\n}());\nexport { Controller };\n//# sourceMappingURL=controller.js.map","import { Controller } from 'stimulus';\n// eslint-disable-next-line import/no-default-export\nexport default class default_1 extends Controller {\n    valueValueChanged() {\n        this.inputTarget.value = this.valueValue;\n    }\n    handleInput(e) {\n        var _a;\n        this.value = ((_a = e === null || e === void 0 ? void 0 : e.currentTarget) === null || _a === void 0 ? void 0 : _a.value) || '';\n    }\n    handleNumberChange(steps) {\n        // Returns the length of decimal places in a number\n        const dpl = (num) => (num.toString().split('.')[1] || []).length;\n        const numericValue = this.valueValue ? parseFloat(this.valueValue) : 0;\n        if (isNaN(numericValue)) {\n            return;\n        }\n        // Making sure the new value has the same length of decimal places as the\n        // step / value has.\n        const decimalPlaces = Math.max(dpl(numericValue), dpl(this.normalizedStep));\n        const newValue = Math.min(Number(this.normalizedMax), Math.max(numericValue + steps * this.normalizedStep, Number(this.normalizedMin)));\n        this.valueValue = String(newValue.toFixed(decimalPlaces));\n    }\n    onClearClick() {\n        this.value = '';\n    }\n    onMinusClick() {\n        this.handleNumberChange(-1);\n    }\n    onPlusClick() {\n        this.handleNumberChange(1);\n    }\n    get value() {\n        return this.valueValue;\n    }\n    set value(val) {\n        this.valueValue = val;\n        if (this.hasClearButtonTarget) {\n            this.clearButtonTarget.classList.toggle(this.clearButtonVisibilityClass, val === '');\n            this.clearButtonTarget.setAttribute('tab-index', val === '' ? '-1' : '-');\n        }\n        if (this.hasCharacterCountTarget) {\n            this.characterCountTarget.textContent = this.textTemplateValue\n                .replace(`{count}`, `${val.length}`)\n                .replace(`{max_count}`, `${this.maxLengthValue}`);\n            this.characterCountTarget.setAttribute('aria-label', this.labelTemplateValue\n                .replace(`{count}`, `${val.length}`)\n                .replace(`{max_count}`, `${this.maxLengthValue}`));\n        }\n    }\n    get step() {\n        return parseInt(this.inputTarget.getAttribute('step') || '1');\n    }\n    get normalizedStep() {\n        return this.step != null ? this.step : 1;\n    }\n    get normalizedMax() {\n        return this.maxValue != null ? this.maxValue : Infinity;\n    }\n    get normalizedMin() {\n        return this.minValue != null ? this.minValue : -Infinity;\n    }\n}\ndefault_1.targets = ['input', 'clearButton', 'characterCount'];\ndefault_1.values = {\n    min: Number,\n    max: Number,\n    value: String,\n    labelTemplate: String,\n    textTemplate: String,\n    maxLength: Number,\n};\ndefault_1.classes = ['clearButtonVisibility'];\n","import TextField from './text_field';\nexport { TextField, };\nexport function registerPolarisStimulusControllers(application) {\n    application.register('text-field', TextField);\n}\n"],"names":["EventListener","eventTarget","eventName","eventOptions","this","unorderedBindings","Set","prototype","connect","addEventListener","disconnect","removeEventListener","bindingConnected","binding","add","bindingDisconnected","delete","handleEvent","event","extendedEvent","stopImmediatePropagation_1","stopImmediatePropagation","Object","assign","immediatePropagationStopped","call","extendEvent","_i","_a","bindings","length","defineProperty","get","Array","from","sort","left","right","leftIndex","index","rightIndex","enumerable","configurable","Dispatcher","application","eventListenerMaps","Map","started","start","eventListeners","forEach","eventListener","stop","values","reduce","listeners","map","concat","fetchEventListenerForBinding","handleError","error","message","detail","fetchEventListener","eventListenerMap","fetchEventListenerMapForEventTarget","cacheKey","createEventListener","set","parts","keys","key","push","join","descriptorPattern","parseEventTarget","eventTargetName","window","document","Action","element","descriptor","tagName","toLowerCase","defaultEventNames","getDefaultEventNameForElement","identifier","methodName","forToken","token","descriptorString","content","matches","trim","match","split","options","replace","test","toString","eventNameSuffix","a","e","button","form","input","getAttribute","select","textarea","Error","Binding","context","action","willBeInvokedByEvent","invokeWithEvent","method","controller","target","Element","contains","scope","containsElement","ElementObserver","delegate","_this","elements","mutationObserver","MutationObserver","mutations","processMutations","observe","attributes","childList","subtree","refresh","takeRecords","matchElementsInTree","has","removeElement","_b","_c","addElement","mutations_1","mutation","processMutation","type","processAttributeChange","attributeName","processRemovedNodes","removedNodes","processAddedNodes","addedNodes","node","elementAttributeChanged","matchElement","nodes","elementFromNode","processTree","elementIsActive","tree","processor","nodeType","Node","ELEMENT_NODE","isConnected","elementMatched","elementUnmatched","AttributeObserver","elementObserver","hasAttribute","querySelectorAll","selector","elementMatchedAttribute","elementUnmatchedAttribute","elementAttributeValueChanged","StringMapObserver","stringMap","knownAttributeNames","refreshAttribute","getStringMapKeyForAttribute","stringMapKeyAdded","value","stringMapValueChanged","stringMapKeyRemoved","currentAttributeNames","recordedAttributeNames","attribute","name","fetch","del","size","prune","extendStatics","Multimap","valuesByKey","hasKey","hasValue","some","getValuesForKey","getKeysForValue","filter","__extends","d","b","setPrototypeOf","__proto__","p","hasOwnProperty","__","constructor","create","_super","IndexedMultimap","keysByValue","TokenListObserver","attributeObserver","tokensByElement","tokensMatched","readTokensForElement","refreshTokensForElement","unmatchedTokens","matchedTokens","tokensUnmatched","tokens","tokenMatched","tokenUnmatched","previousTokens","currentTokens","firstDifferingIndex","Math","max","_","findIndex","tokensAreEqual","slice","tokenString","parseTokenString","ValueListObserver","tokenListObserver","parseResultsByToken","WeakMap","valuesByTokenByElement","fetchParseResultForToken","fetchValuesByTokenForElement","elementMatchedValue","elementUnmatchedValue","parseResult","parseToken","valuesByToken","parseValueForToken","BindingObserver","bindingsByAction","valueListObserver","actionAttribute","disconnectAllActions","schema","connectAction","disconnectAction","clear","ValueObserver","receiver","stringMapObserver","valueDescriptorMap","invokeChangedCallbacksForDefaultValues","attributeValue","invokeChangedCallbackForValue","valueDescriptors","name_1","undefined","defaultValue","data","Context","module","controllerConstructor","bindingObserver","dispatcher","valueObserver","initialize","parentElement","readInheritableStaticArrayValues","propertyName","ancestors","getAncestorsForConstructor","definition","isArray","getOwnStaticArrayValues","readInheritableStaticObjectPairs","pairs","apply","getOwnStaticObjectPairs","getPrototypeOf","reverse","__spreadArrays","s","i","il","arguments","r","k","j","jl","bless","properties","shadowConstructor","extend","shadowProperties","getOwnKeys","shadowingDescriptor","getOwnPropertyDescriptor","getShadowedDescriptor","getShadowProperties","defineProperties","shadow","blessedProperties","blessing","getBlessedProperties","getOwnPropertySymbols","object","getOwnPropertyNames","extendWithReflect","extended","_newTarget","Reflect","construct","Module","blessDefinition","contextsByScope","connectedContexts","connectContextForScope","fetchContextForScope","disconnectContextForScope","ClassMap","getDataKey","getAttributeName","getAttributeNameForKey","camelize","char","toUpperCase","capitalize","charAt","dasherize","DataMap","setAttribute","removeAttribute","Guide","logger","warnedKeysByObject","warn","warnedKeys","attributeValueContainsToken","TargetSet","targetName","find","targetNames","findTarget","findLegacyTarget","findAll","targets","findAllTargets","findAllLegacyTargets","getSelectorForTargetName","findElement","findAllElements","getLegacySelectorForTargetName","deprecate","targetDescriptor","targetAttribute","guide","Scope","classes","closest","controllerSelector","queryElements","controllerAttribute","ScopeObserver","scopesByIdentifierByElement","scopeReferenceCounts","scopesByIdentifier","fetchScopesByIdentifierForElement","createScopeForElementAndIdentifier","referenceCount","scopeConnected","scopeDisconnected","Router","scopeObserver","modulesByIdentifier","modules","contexts","loadDefinition","unloadIdentifier","connectModule","disconnectModule","getContextForElementAndIdentifier","defaultSchema","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","__generator","body","f","y","t","g","label","sent","trys","ops","verb","throw","return","Symbol","iterator","n","v","op","TypeError","pop","ClassPropertiesBlessing","classDefinition","TargetPropertiesBlessing","targetDefinition","ValuePropertiesBlessing","valueDefinitionPairs","propertyDescriptorMap","valueDefinitionPair","valueDescriptor","parseValueDefinitionPair","read","readers","write","writers","default","propertiesForValueDefinitionPair","defaultValuesByType","valueDescriptorForTokenAndType","typeConstant","Boolean","Number","String","parseValueTypeConstant","Application","documentElement","console","router","readyState","register","load","head","rest","definitions","unload","identifiers","getControllerForElementAndIdentifier","array","boolean","number","string","JSON","parse","parseFloat","writeJSON","stringify","Controller","blessings","default_1","valueValueChanged","inputTarget","valueValue","handleInput","currentTarget","handleNumberChange","steps","dpl","num","numericValue","isNaN","decimalPlaces","normalizedStep","newValue","min","normalizedMax","normalizedMin","toFixed","onClearClick","onMinusClick","onPlusClick","val","hasClearButtonTarget","clearButtonTarget","classList","toggle","clearButtonVisibilityClass","hasCharacterCountTarget","characterCountTarget","textContent","textTemplateValue","maxLengthValue","labelTemplateValue","parseInt","maxValue","Infinity","minValue","registerPolarisStimulusControllers","TextField","labelTemplate","textTemplate","maxLength"],"mappings":"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"}